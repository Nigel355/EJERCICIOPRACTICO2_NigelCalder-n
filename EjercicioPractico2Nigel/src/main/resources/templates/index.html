<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Inicio - Películas</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header>
        <h1>Bienvenido a la cartelera</h1>

        <!-- Usuario logeado -->
        <div th:if="${session.usuarioLogeado != null}">
            <p>Hola, <span th:text="${session.usuarioLogeado.username}">Usuario</span>!</p>
            <a href="/logout2">Cerrar sesión</a>

            <!-- Botón solo visible para admins -->
            <div th:if="${session.usuarioLogeado.admin}">
                <a href="/admin/peliculas" class="boton-admin">Gestionar películas y funciones</a>
            </div>
        </div>

        <!-- Usuario no logeado -->
        <div th:if="${session.usuarioLogeado == null}">
            <a href="/login2">Iniciar sesión</a>
            <a href="/registro">Registrarse</a>
        </div>
    </header>

    <main>
        <h2>Películas disponibles</h2>
        <div>
            <ul>
                <li th:each="pelicula : ${peliculas}">
                    <h3 th:text="${pelicula.titulo}">Título</h3>
                    <p th:text="${pelicula.descripcion}">Descripción</p>
                    <p><strong>Director:</strong> <span th:text="${pelicula.director}">Director</span></p>
                    <p><strong>Duración:</strong> <span th:text="${pelicula.duracion}">Duración</span> minutos</p>

                    <!-- Botón reservar solo si está logeado -->
                    <a th:href="@{/reservar(idPelicula=${pelicula.id})}" 
                       th:if="${session.usuarioLogeado != null}">Reservar</a>
                </li>
            </ul>
        </div>
    </main>
</body>
</html>